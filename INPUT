#########################################
######### INPUT for build_model #########
#########################################
# Simulation box dimensions (in nanometers)
# if you do slit, xbox ybox zbox can be ignored
xbox           = 5             # Box length in X direction (nm)
ybox           = 6             # Box length in Y direction (nm)
zbox           = 10            # Box length in Z direction (nm)
bulk_xbox      = 5             # Box length in bulk_X direction (nm)
bulk_ybox      = 6             # Box length in bulk_Y direction (nm)
bulk_zbox      = 10            # Box length in bulk_Z direction (nm)

# input file prefixes (without extensions)
TOP            = topology      # Prefix for topology file (e.g., 'topology')
bulk_top       = bulk_topol    # Prefix for bulk topology file (e.g., 'topology')
MDP            = grompp        # Prefix for mdp file (e.g., 'grompp')
mini_MDP       = mini          # Prefix for Energy Minimization mdp file (e.g., 'mini')
packmol        = packmol       # Prefix for packmol inp file (e.g., 'packmol')
bulk_pa        = bulk_pack     # Prefix for bulk packmol inp file (e.g., 'packmol')

# gromacs settings
GMXRC          = /share/home/app/gromacs-2020.4/bin/GMXRC  # Path to GROMACS environment script (only modeling module)
NPOS           = 4             # Number of OpenMP threads for CPU parallelization
GPU            = 1             # Enable GPU acceleration: 1=yes, 0=no
maxWarn        = 1             # Maximum number of warnings allowed during grompp preprocessing
nsteps_bulk    = 100           # MD steps for get bulk density run (2 fs/step)
nsteps_den     = 100           # MD steps for check_density run (electrode)
nsteps_equ     = 100           # MD steps for equilibration run
nsteps_ini     = 100           # MD steps for product initial frames run
XOUT_FRAMES    = 100           # Frequency of tajectory output (in steps)
num_intialframes = 100         # Numbers of initial frames

# Density analysis parameters
NZ             = 100           # Number of slices along Z-axis for density calculation
BE_TIME        = 1000          # Start time for density analysis (in ps, to skip equilibration)
BE_Z           = 21            # Start Z-position for density analysis (in nm)
END_Z          = 29            # End Z-position for density analysis (in nm)
error          = 5             # Allowed density error threshold (%)
factor         = 0.1           # Scaling factor per iteration for box resizing (0.1 mean: low 0.9; up 1.1)

max_iter       = 3             # Maximum number of iterations for density adjustment
onlyUP         = 1             # 1=only accept density upper setting; 0=accept both upper and lower settings

# slit parameters 
# molecule names of electrode are EL ER GRA 
LLX = 3.4
LLZ = 8
dslit = 1.5
len_bulk = 8
is_auto_top=1
MOL = ACN Na CLO
MOL_num = 3000 40 40
MOL_num_bulk = 3000 40 40
###This item is used to adjust the bulk density in NVT simulations of the electrode system. 
#It can be either automatically generated or manually added. 
#Automatic generation implies performing bulk-phase modeling and analyzing the equilibrium bulk density.
set_density   = 940            # Target system density (kg/m³)

#################  NOTICE : Molecule names for 'md_run' onfly setting and modeling
MOL_name       = ACN Na CLO    # Space-separated list of molecule/ion names (e.g., for density groups)

#########################################
######### INPUT for md_run ##############
#########################################
# input file folder prefixes
initialframes  = ./initialframes # Prefix for initial frames folder (e.g., 'initialframes')
matrixdata     = ./matrixdata    # Prefix for electrode matrix data folder (e.g., 'matrixdata')
basicfile      = ./basicfile     # Prefix for basic files(top, itp, mdp, ndx) folder (e.g., 'basicfile')
#slowdir       = /data1/huangnan/scanratepotential

# fold settings
V              = 2             # voltage of simulation (V)
ic             = 0             # scan rate of simulation(Rise Time, ps)
Temperature    = 298           # Target simulation temperature (in Kelvin)

#job settings
START          = 1             # initial case number
END            = 10            # end case number
num            = 1             # each job simulate case number
queue          = new           # PBS queue: short / new / fast / long (4090:normal/fast)
mode           = default       # default/append (append: run md with append mode; default: default)
DT             = 0.002         # time step for simulation(ps)
DEFFNM         = slownvt       # outfile name for simulation
server_machine = eninstein     # server machine name (eninstein / 4090 / wuchao)

# job control settings
ismakecase     = 1             # 1 to create case dirs, 0 to skip
ismakejob      = 1             # 1 to generate & submit job, 0 to skip

# scan settings
TIME           = 10000         # total time for generate scan file time(not simulation time)(ps)
SKIPTIME_PS    = 400           # skip time for generate scan file time(not simulation time)(ps)
TAO            = 0             # Rise Time for generate scan rate file time(ps, it can be write "0 10 20 ..." ) 

#rerun settings
isRerun        = 0
rerun_start    = 1
rerun_end      = 1

#onfly settings
LOW_ONFLY      = 0 0 20        # onfly_setting
UP_ONFLY       = 4.3 4.3 30    # onfly_setting
NBIN_ONFLY     = 1 1 1000      # onfly_setting
MODE_ONFLY     = 3             # onfly_setting

#########################################
######### INPUT for analysis ############
#########################################(待完善)
# onfly analysis settings
analysis_begin_t      = 0        # Start time for analysis (in ps)
analysis_end_t        = 0        # End time for analysis (in ps, with default value 0 mean all time)
analysis_ONFLY_isD    = 1        # Enable dynamic output in onfly analysis: 1=yes, 0=no
#analysis_ONFLY_isGeo  = 1       #
analysis_ONFLY_in     = densMNC3D  # Input file name for onfly analysis file
MODE_ONFLY            = 3             # onfly_setting

# analysis case settings
analyze_begin_case    = 1        # Starting case number for analysis
analyze_end_case      = 1        # Ending case number for analysis
analyze_T             = 298      # Temperature value for analysis (in K)   
analyze_V             = 2        # Voltage value for analysis (in V)
analyze_tau           = 0        # Rise time parameter for analysis (in ps)
analyze_mol           = ACN      # Target molecule name for analysis(it can be write by "ACN Na CLO ..." ) 

# Analysis program settings (MD_PP)
analyze_core          = 1
analyze_cpp           = orientationwater2dmap_dynamic2  # Name of analysis C++ program
build_gmx             = /share/home/huangnan_n/app/code-gmx-onfly/bin/GMXRC  # GMX environment needed to compile the above C++ code
xtcORtrr              = xtc
############################################################################################################
# Additional command line arguments for analysis program #
# Classic post-processing commands including -f -s -n -o are already configured. 
# Note that the filenames required for -f and -s should remain consistent and use the DEFFNM parameter for specification.
# Additional custom command parameters need to be entered here.
analysis_extra_command =  -dens number -sl 100 100 1 -num2ave 100 -min 0 0 20 -max 4.176 4.254 21
analyze_is_skip_first_line = 0

### data base
# 1.angleOF_dipole_Z: -sl 1 -zmin 21 -zmax 29 -n2ave 20 -out 1
# 2.3DdensityZl_dynamic2020: -dens number -sl 100 100 1 -num2ave 100 -min 0 0 20 -max 4.176 4.254 21

